#!/usr/bin/env python3

"""
 Author:    Lemur
 Date:      12/19/2022  08:27 AM

 A very simple web page written in Python 3 for testing purposes.
 I hope to add functionality later such as logging requests and
 other fun tooling. For now, it only serves a basic HTML page.

"""

import sys
import time
from http.server import BaseHTTPRequestHandler, HTTPServer

hostname = "localhost"
serverport = int(sys.argv[1])

class CustomServer(BaseHTTPRequestHandler):

    def do_GET(self):

        self.send_response(200)
        self.send_header("Content-Type", "text/html")
        self.end_headers()

        self.wfile.write(bytes(
            """
                <html>
                    <head>
                        <title>Custom Python3 Portal</title>
                    </head>

                <body>

                    <p> Request: {} </p>
                    <p> This is an example http server written in Python. </p>

                </body>
                </html>

            """.format(self.path), "UTF-8"
            ))

if __name__ == '__main__':

    webServer = HTTPServer((hostname, serverport), CustomServer)
    print("Server started http://%s:%s\n" % (hostname, serverport))

    try:
        webServer.serve_forever()

    except KeyboardInterrupt:
        pass

    webServer.server_close()
    print("Server stopped.\n")
